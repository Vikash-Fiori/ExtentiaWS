<mvc:View controllerName="com.agel.mmts.materialreservation.controller.MaterialReservationPage" height="100%"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:fm="sap.ui.layout.form"
    xmlns:f="sap.f">
    <f:DynamicPage showFooter="true" headerExpanded="true" busy="{objectViewModel>/busy}">
        <!-- DynamicPage Title -->
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <Title id="pageTitle" text="Create Issue Reservation"/>
                </f:heading>
                <f:actions>
                    <!-- <Button text="Raise Return Material Request" press="onConfirmRequest" type="Emphasized"/> -->
                </f:actions>
            </f:DynamicPageTitle>
        </f:title>
        <!-- DynamicPage Header -->
        <f:header>
            <f:DynamicPageHeader pinnable="true">
                <f:content>
                    <HBox alignContent="SpaceAround">
                        <fm:SimpleForm layout="ColumnLayout" binding="{HeaderDetailsModel>/}" columnsM="2" columnsL="3" columnsXL="4" singleContainerFullSize="true" class="style-RemoveTitleHeight">
                            <!-- <core:Title  /> -->
                            <Label text="Movement Type" required="true"/>
                            <Select id="idSelMovementType" change="onMoventTypeChange" editable="false" selectedKey="311" forceSelection="false" items="{HeaderDetailsModel>/movementType}">
                                <core:Item key="{HeaderDetailsModel>value}" text="{HeaderDetailsModel>Text}" />
                            </Select>
                            <Label text="Company Code" required="true"/>
                            <Select id="idSelCompanyCode" forceSelection="false" selectedKey="{HeaderDetailsModel>CompanyCode}" items="{
						    path: '/MasterCompanyCodeSet'						    
					    }">
                                <core:Item key="{CompanyCode}" text="{CompanyCode} - {Name}" />
                            </Select>
                            <Label text="Good Recipient/SO Number" required="true"/>
                            <Input id="idGoodReciept" value="{HeaderDetailsModel>GoodReciepient}" />

                            <Label text="Plant" required="true"/>


                            <Select id="idSelPlant" forceSelection="false" selectedKey="{HeaderDetailsModel>Plant}" items="{
						    path: '/MasterPlantDetailSet'						    
					    }">
                                <core:Item key="{PlantId}" text="{PlantId} - {Name}" />
                            </Select>
                            <!-- <core:Title ></core:Title> -->
                            <Label text="Cost Center" required="true"/>
                            <Input id="idCostCenter" value="{HeaderDetailsModel>CostCenter}" />

                            <Label text="GL Account" required="true"/>
                            <Input id="idGLAccount" value="{HeaderDetailsModel>GLAccount}" />
                            <Label text="Contractor Name" required="true"/>
                            <Select id="idVendor" change="onVendorSelected" selectedKey="{HeaderDetailsModel>vendorID}" forceSelection="false" items="{/VendorSet}">
                                <core:Item key="{ID}" text="{Name} - {VendorCode}" />
                            </Select>
                        </fm:SimpleForm>
                    </HBox>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <!-- DynamicPage Content -->
        <f:content>
            <VBox>
                <Table items="{reservationTableModel>/}" growingThreshold="5" growing="true" fixedLayout="false">
                    <headerToolbar>
                        <OverflowToolbar >
                            <Title text="{i18n>lineItems}" level="H4" />
                            <content>
                                <ToolbarSpacer></ToolbarSpacer>
                                <Button text="Add" icon="sap-icon://add" press="onAddReservationItemsPress"></Button>
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>
                    <columns>
                        <Column >
                            <Text text="Material Name"/>
                        </Column>
                        <Column>
                            <Text text="Description"/>
                        </Column>
                        <Column>
                            <Text text="UOM"/>
                        </Column>

                        <Column>
                            <Text text="Quantity"/>
                        </Column>

                        <Column width="5%">
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem >
                            <cells>
                                <Input suggestionItemSelected="onMaterialCodeChange" selectedKey="{reservationTableModel>MaterialCode}" selectedItem="{reservationTableModel>MaterialCode}" id="idPMaterialCode" showSuggestion="true" suggestionRows="{
                                                path: '/NewStockParentItemSet',
                                                templateShareable:false
                                            }">
                                    <suggestionColumns>
                                        <Column demandPopin="true">
                                            <Label text="Material Name" />
                                        </Column>
                                        <Column demandPopin="true" minScreenWidth="Tablet">
                                            <Label text="Description" />
                                        </Column>
                                        <Column hAlign="End" minScreenWidth="Tablet">
                                            <Label text="UOM" />
                                        </Column>
                                        <Column>
                                            <Label text="Quantity in Stock" />
                                        </Column>
                                    </suggestionColumns>
                                    <suggestionRows>
                                        <ColumnListItem>
                                            <Text text="{MaterialCode}" />
                                            <Text wrapping="true" text="{Description}" />
                                            <Text text="{UOM}" />
                                            <Text text="{Remaining_Qty}" />
                                        </ColumnListItem>
                                    </suggestionRows>
                                </Input>
                                <Text text="{reservationTableModel>MaterialName}"/>
                                <Text text="{reservationTableModel>BaseUnit}"/>

                                <Input width="30%" value="{reservationTableModel>Qty}"/>
                                <Button icon="sap-icon://delete" press="onDeleteReservationItemPress" type="Transparent"/>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </f:content>
        <f:footer>
            <OverflowToolbar visible="{= ${objectViewModel>/isButtonVisible} ? true : true}">
                <ToolbarSpacer/>
                <Button text="Save" class="sapUiTinyMarginBegin" press="onSubmitReservation" type="Emphasized" />
                <Button text="Cancel" class="sapUiTinyMarginBegin" press="onCancelReservation" />
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>

</mvc:View>
