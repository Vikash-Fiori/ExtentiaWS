sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/model/Sorter","sap/ui/Device","sap/ui/core/ValueState"],function(e,t,a,i,n,r,o,s){"use strict";return e.extend("com.agel.mmts.securityPerson-History.controller.LandingPage",{onInit:function(){this._addSearchFieldAssociationToFB();var e=new t({email:"rakeshpatil28@gmail.com"});this.setModel(e,"oModel")},_addSearchFieldAssociationToFB:function(){let e=this.getView().byId("filterbar");let t=e.getBasicSearch();var a;if(!t){a=new sap.m.SearchField({id:"idSearch",showSearchButton:false})}else{t=null}e.setBasicSearch(a);a.attachBrowserEvent("keyup",function(e){if(e.which===13){this.onSearch()}}.bind(this))},onSearch:function(e){var t=this.byId("idNameInput").getValue();var n=this.byId("dateRangeSelectionId");var r=this.byId("dateRangeSelectionId").getValue();var o=this.byId("idVehicleNObInput").getValue();var s=[];var c=this.getView().byId("filterbar").getBasicSearchValue();if(c){s.push(new a("po_number",i.Contains,c))}if(t){s.push(new a("po_number",i.EQ,t))}if(r!=""){var l=new Date(n.getFrom());var d=new Date(n.getTo());s.push(new a("createdAt",i.BT,l.toISOString(),d.toISOString()))}if(o){s.push(new a("packing_list/vehicle_no",i.EQ,o))}var u=new a({filters:s,and:true});var h=this.getView().byId("idScannedMaterialHistoryTable").getBinding("items");h.filter(u)},onDateRangeSelectionChange:function(e){var t=e.getParameter("from"),a=e.getParameter("to"),i=e.getParameter("valid"),n=e.getSource(),r=this.byId("TextEvent");if(i){n.setValueState(s.None)}else{n.setValueState(s.Error)}},onScannedHistoryTableUpdateStarted:function(e){},onScannedHistoryItemPress:function(e){this._showObject(e.getSource().getBindingContext().getObject().qr_code_ID)},_showObject:function(e){var t=this;var a=sap.ushell.Container.getService("CrossApplicationNavigation");a.isIntentSupported(["ScanQR-SecurityPerson"]).done(function(e){}).fail(function(){new sap.m.MessageToast("Provide corresponding intent to navigate")});var i=a&&a.hrefForExternal({target:{semanticObject:"ScanQR",action:"SecurityPerson"}})||"";var n=window.location.href.split("#")[0]+i+"&/BarCodeDetails/"+e;console.log({sUrl:n});window.open(n,"_self")}})});